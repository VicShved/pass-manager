
# Менеджер паролей

Состоит из клиента,код которого лежит в корневой папке client/ и сервера (папка server/)
Взаимодействие между клиентом и сервером осуществляется по grpc. Proto файл находится в папке server/pkg/api/proto

## Основной алгоритм работы пользователя

1. Пользователь запускает клиента. Обязательный параметр запуска  - адрес сервера
2. Пользователь регистрируется (если заходит первый раз) или логинится
3. Пользователь загружает на сервер или считывает ранее загруженные данные (логины/пароли, данные карт, файлы)  

## Безопасность

1. После ввода логина/пароля при регистрации или логина клиент от сервера получает jwt токен, с помощью которого в дальнейшем происходит авторизация запросов пользователя на сервере
2. При созранении на сервере данные карточек/логинов сохраняются в зашифрованном виде в файлах. Для каждого файла ключ шифрования уникален и хранится в БД. Разделение доступа к БД и файловой системе не позволит одному человеку узнать ключ шифрования и зашифрованный файл.
3. Передача дданных между клиентом и сервером происходит в зашифрованном виде (TLS)   

## Сервер

1. Для работы сервера требуется подключение к БД. Реквизиты сервера должны быть переданыв командной строке запуска (параметр d), например:
run main.go -d postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable
Параметры запуска:
 -a string
        start base url (default "localhost")
  -d string
        DataBase DSN
  -f string
        file storage path
  -k string
        Secret key (default "VeryImpotantSecretKey.YesYes")
  -l string
        Log level (default "INFO")
  -p string
        port (default "7777")
  -s    enable tls (default true)

2. Хранение данных осуществляется в двух репозиториях:
    2.1 В БД хранятся метаданные (владелец/ключ шифрования/имя файла/описание данных)
    2.2 В файловом репозитории хранятся в зашифрованном виде: пары пароль/ключ и данные карт. 
    2.3 В файловом репозитории храняться произвольные бинарные и текстовые данные в виде файлов, 
        которые загружаются и выгружаются частями с использованием grpc stream, 
        что позволяет сохранять/выгружать файлы больших объемов.


## Клиент

Клиент реализован в виде TUI приложения. Навигация в клиенте осуществляется с помощью текстового интерфейса пользователя.
Параметры запуска клиента:
 -a string
        server url (default "localhost")
  -f string
        config from file
  -l string
        Log level (default "INFO")
  -p string
        server port (default "7777")
  -s    TLS connection with server

Клиент собран для трех платформ: linux, windows, mac. Исполняемы файлы лежат в папке client/cmd


## Дальнейшие улучшения

### Сервер

1. Шифрование файлов на сервер. На данный момент шифруются данные карт и пары логин/пароль. 

### Клиент

1. Улучшение удобства работы путем добавления данныхоб  ID сохраненных данных.

